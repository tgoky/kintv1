(this.webpackJsonpKintsugi=this.webpackJsonpKintsugi||[]).push([[35],{2702:function(t){t.exports=JSON.parse('[{"inputs":[{"internalType":"address[]","name":"boosts","type":"address[]"}],"name":"getBoostInfo","outputs":[{"components":[{"internalType":"uint256","name":"totalSupply","type":"uint256"},{"internalType":"uint256","name":"rewardRate","type":"uint256"},{"internalType":"uint256","name":"periodFinish","type":"uint256"}],"internalType":"struct BoostInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"govVaults","type":"address[]"}],"name":"getGovVaultInfo","outputs":[{"components":[{"internalType":"uint256","name":"totalSupply","type":"uint256"}],"internalType":"struct GovVaultInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"vaults","type":"address[]"}],"name":"getVaultInfo","outputs":[{"components":[{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"pricePerFullShare","type":"uint256"},{"internalType":"address","name":"strategy","type":"address"}],"internalType":"struct VaultInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"}]')},3345:function(t,e,a){"use strict";a.r(e),a.d(e,"ContractDataAPI",(function(){return l}));var n=a(2702),s=a(7),o=a.n(s),i=a(12),r=a(26),d=a(10),p=a(5);const c=n;class l{constructor(t,e){this.web3=t,this.chain=e}async fetchAllContractData(t,e,a,n){const s=new this.web3.eth.Contract(c,this.chain.fetchContractDataAddress),o=Object(r.d)(),d=Object(i.chunk)(n,o),p=Object(i.chunk)(a,o),l=Object(i.chunk)(e,o),u=d.map((t=>s.methods.getBoostInfo(t.map((t=>t.earnContractAddress))).call())),y=l.map((t=>s.methods.getVaultInfo(t.map((t=>t.earnContractAddress))).call())),m=p.map((t=>s.methods.getGovVaultInfo(t.map((t=>t.earnContractAddress))).call())),h=await Promise.all([...u,...y,...m]),b={boosts:[],govVaults:[],standardVaults:[]};let f=0;for(const i of d){const e=h[f].map(((e,a)=>this.boostFormatter(t,e,i[a])));b.boosts=b.boosts.concat(e),f++}for(const i of l){const e=h[f].map(((e,a)=>this.standardVaultFormatter(t,e,i[a])));b.standardVaults=b.standardVaults.concat(e),f++}for(const i of p){const e=h[f].map(((e,a)=>this.govVaultFormatter(t,e,i[a])));b.govVaults=b.govVaults.concat(e),f++}return b}standardVaultFormatter(t,e,a){const n=Object(d.p)(t,a.id),s=Object(p.i)(t,n.chainId,n.earnContractAddress),i=Object(p.i)(t,n.chainId,n.depositTokenAddress);return{id:a.id,balance:new o.a(e.balance).shiftedBy(-i.decimals),pricePerFullShare:new o.a(e.pricePerFullShare).shiftedBy(-s.decimals),strategy:e.strategy}}govVaultFormatter(t,e,a){const n=Object(d.p)(t,a.id),s=Object(p.i)(t,n.chainId,n.depositTokenAddress);return{id:a.id,totalSupply:new o.a(e.totalSupply).shiftedBy(-s.decimals)}}boostFormatter(t,e,a){const n=Object(p.i)(t,a.chainId,a.earnedTokenAddress),s=Object(d.p)(t,a.vaultId),i=Object(p.i)(t,s.chainId,s.depositTokenAddress);return{id:a.id,totalSupply:new o.a(e.totalSupply).shiftedBy(-i.decimals),rewardRate:new o.a(e.rewardRate).shiftedBy(-n.decimals),periodFinish:"0"===e.periodFinish?null:new Date(1e3*parseInt(e.periodFinish))}}}}}]);
//# sourceMappingURL=35.91c516ce.chunk.js.map